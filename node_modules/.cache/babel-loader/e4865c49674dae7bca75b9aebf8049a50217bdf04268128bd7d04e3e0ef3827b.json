{"ast":null,"code":"import _slicedToArray from\"/Users/nikitakraynov/Downloads/magazine/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{setSort}from\"../redux/slices/filterSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sort(){var dispatch=useDispatch();var sort=useSelector(function(state){return state.filter.sort;});var sortRef=React.useRef();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var list=[{name:\"популярности (по убыванию)\",sortProperty:\"rating\"},{name:\"популярности (по возрастанию)\",sortProperty:\"-rating\"},{name:\"цене (по убыванию)\",sortProperty:\"price\"},{name:\"цене (по возрастанию)\",sortProperty:\"-price\"},{name:\"алфавиту (по убыванию)\",sortProperty:\"title\"},{name:\"алфавиту (по возрастанию)\",sortProperty:\"-title\"}];var onClickListItem=function onClickListItem(obj){dispatch(setSort(obj));setOpen(false);};React.useEffect(function(){var handleClickOutSide=function handleClickOutSide(event){if(!event.path.includes(sortRef.current)){setOpen(false);console.log(\"click oustside\");}};document.body.addEventListener(\"click\",handleClickOutSide);return function(){return document.body.removeEventListener(\"click\",handleClickOutSide);};},[]);return/*#__PURE__*/_jsxs(\"div\",{ref:sortRef,className:\"sort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort__label\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"10\",height:\"6\",viewBox:\"0 0 10 6\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\",fill:\"#2C2C2C\"})}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u043F\\u043E:\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOpen(!open);},children:sort.name})]}),open&&/*#__PURE__*/_jsx(\"div\",{className:\"sort__popup\",children:/*#__PURE__*/_jsx(\"ul\",{children:list.map(function(obj,i){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onClickListItem(obj);},className:sort.sortProperty===obj.sortProperty?\"active\":\"\",children:obj.name},i);})})})]});}export default Sort;","map":{"version":3,"names":["React","useSelector","useDispatch","setSort","Sort","dispatch","sort","state","filter","sortRef","useRef","useState","open","setOpen","list","name","sortProperty","onClickListItem","obj","useEffect","handleClickOutSide","event","path","includes","current","console","log","document","body","addEventListener","removeEventListener","map","i"],"sources":["/Users/nikitakraynov/Downloads/magazine/src/components/Sort.jsx"],"sourcesContent":["import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { setSort } from \"../redux/slices/filterSlice\";\n\nfunction Sort() {\n  const dispatch = useDispatch();\n  const sort = useSelector((state) => state.filter.sort);\n  const sortRef = React.useRef();\n\n  const [open, setOpen] = React.useState(false);\n  const list = [\n    { name: \"популярности (по убыванию)\", sortProperty: \"rating\" },\n    { name: \"популярности (по возрастанию)\", sortProperty: \"-rating\" },\n    { name: \"цене (по убыванию)\", sortProperty: \"price\" },\n    { name: \"цене (по возрастанию)\", sortProperty: \"-price\" },\n    { name: \"алфавиту (по убыванию)\", sortProperty: \"title\" },\n    { name: \"алфавиту (по возрастанию)\", sortProperty: \"-title\" },\n  ];\n\n  const onClickListItem = (obj) => {\n    dispatch(setSort(obj));\n    setOpen(false);\n  };\n\n  React.useEffect(() => {\n    const handleClickOutSide = (event) => {\n      if (!event.path.includes(sortRef.current)) {\n        setOpen(false);\n        console.log(\"click oustside\");\n      }\n    };\n    document.body.addEventListener(\"click\", handleClickOutSide);\n\n    return () => document.body.removeEventListener(\"click\", handleClickOutSide);\n  }, []);\n\n  return (\n    <div ref={sortRef} className=\"sort\">\n      <div className=\"sort__label\">\n        <svg\n          width=\"10\"\n          height=\"6\"\n          viewBox=\"0 0 10 6\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\"\n            fill=\"#2C2C2C\"\n          />\n        </svg>\n        <b>Сортировка по:</b>\n        <span onClick={() => setOpen(!open)}>{sort.name}</span>\n      </div>\n      {open && (\n        <div className=\"sort__popup\">\n          <ul>\n            {list.map((obj, i) => (\n              <li\n                key={i}\n                onClick={() => onClickListItem(obj)}\n                className={\n                  sort.sortProperty === obj.sortProperty ? \"active\" : \"\"\n                }\n              >\n                {obj.name}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Sort;\n"],"mappings":"6HAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,OAAO,KAAQ,6BAA6B,CAAC,wFAEtD,QAASC,KAAI,EAAG,CACd,GAAMC,SAAQ,CAAGH,WAAW,EAAE,CAC9B,GAAMI,KAAI,CAAGL,WAAW,CAAC,SAACM,KAAK,QAAKA,MAAK,CAACC,MAAM,CAACF,IAAI,GAAC,CACtD,GAAMG,QAAO,CAAGT,KAAK,CAACU,MAAM,EAAE,CAE9B,oBAAwBV,KAAK,CAACW,QAAQ,CAAC,KAAK,CAAC,oDAAtCC,IAAI,qBAAEC,OAAO,qBACpB,GAAMC,KAAI,CAAG,CACX,CAAEC,IAAI,CAAE,4BAA4B,CAAEC,YAAY,CAAE,QAAS,CAAC,CAC9D,CAAED,IAAI,CAAE,+BAA+B,CAAEC,YAAY,CAAE,SAAU,CAAC,CAClE,CAAED,IAAI,CAAE,oBAAoB,CAAEC,YAAY,CAAE,OAAQ,CAAC,CACrD,CAAED,IAAI,CAAE,uBAAuB,CAAEC,YAAY,CAAE,QAAS,CAAC,CACzD,CAAED,IAAI,CAAE,wBAAwB,CAAEC,YAAY,CAAE,OAAQ,CAAC,CACzD,CAAED,IAAI,CAAE,2BAA2B,CAAEC,YAAY,CAAE,QAAS,CAAC,CAC9D,CAED,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,GAAG,CAAK,CAC/Bb,QAAQ,CAACF,OAAO,CAACe,GAAG,CAAC,CAAC,CACtBL,OAAO,CAAC,KAAK,CAAC,CAChB,CAAC,CAEDb,KAAK,CAACmB,SAAS,CAAC,UAAM,CACpB,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,CAAIC,KAAK,CAAK,CACpC,GAAI,CAACA,KAAK,CAACC,IAAI,CAACC,QAAQ,CAACd,OAAO,CAACe,OAAO,CAAC,CAAE,CACzCX,OAAO,CAAC,KAAK,CAAC,CACdY,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC,CAC/B,CACF,CAAC,CACDC,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAAC,OAAO,CAAET,kBAAkB,CAAC,CAE3D,MAAO,kBAAMO,SAAQ,CAACC,IAAI,CAACE,mBAAmB,CAAC,OAAO,CAAEV,kBAAkB,CAAC,GAC7E,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,aAAK,GAAG,CAAEX,OAAQ,CAAC,SAAS,CAAC,MAAM,wBACjC,aAAK,SAAS,CAAC,aAAa,wBAC1B,YACE,KAAK,CAAC,IAAI,CACV,MAAM,CAAC,GAAG,CACV,OAAO,CAAC,UAAU,CAClB,IAAI,CAAC,MAAM,CACX,KAAK,CAAC,4BAA4B,uBAElC,aACE,CAAC,CAAC,2WAA2W,CAC7W,IAAI,CAAC,SAAS,EACd,EACE,cACN,mBAAG,4EAAc,EAAI,cACrB,aAAM,OAAO,CAAE,yBAAMI,QAAO,CAAC,CAACD,IAAI,CAAC,EAAC,UAAEN,IAAI,CAACS,IAAI,EAAQ,GACnD,CACLH,IAAI,eACH,YAAK,SAAS,CAAC,aAAa,uBAC1B,oBACGE,IAAI,CAACiB,GAAG,CAAC,SAACb,GAAG,CAAEc,CAAC,qBACf,WAEE,OAAO,CAAE,yBAAMf,gBAAe,CAACC,GAAG,CAAC,EAAC,CACpC,SAAS,CACPZ,IAAI,CAACU,YAAY,GAAKE,GAAG,CAACF,YAAY,CAAG,QAAQ,CAAG,EACrD,UAEAE,GAAG,CAACH,IAAI,EANJiB,CAAC,CAOH,EACN,CAAC,EACC,EAER,GACG,CAEV,CAEA,cAAe5B,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}